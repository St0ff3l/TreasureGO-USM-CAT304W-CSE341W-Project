<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Forgot Password</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background: #f3f4f6; display: flex; justify-content: center; align-items: center; height: 100vh; }
        .card { background: white; padding: 2.5rem; border-radius: 1rem; width: 100%; max-width: 400px; text-align: center; }
        input { width: 100%; padding: 0.8rem; margin-bottom: 1rem; border: 1px solid #ddd; border-radius: 0.5rem; box-sizing: border-box;}
        button { width: 100%; padding: 0.8rem; border-radius: 0.5rem; border: none; background: #4F46E5; color: white; cursor: pointer; }
        .link { margin-top: 1rem; display: block; font-size: 0.9rem; color: #666; text-decoration: none; }
    </style>
</head>
<body>
<div class="card">
    <h2>Forgot Password</h2>
    <p style="color:#666; font-size:0.9rem; margin-bottom:1.5rem;">Enter your email to receive a reset code.</p>
    <input type="email" id="email" placeholder="Enter your email">
    <button id="sendBtn">Send Reset Code</button>
    <div id="msg" style="color: red; margin-top: 10px;"></div>
    <a href="login.php" class="link">Back to Login</a>
</div>
<script>
    document.getElementById('sendBtn').addEventListener('click', async () => {
        const email = document.getElementById('email').value;
        const btn = document.getElementById('sendBtn');
        if(!email) return;

        btn.disabled = true; btn.textContent = "Sending...";

        try {
            const res = await fetch('../api/forgot_password_send.php', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ email })
            });
            const data = await res.json();
            if(data.success) {
                window.location.href = data.data.next_url;
            } else {
                document.getElementById('msg').textContent = data.message;
                btn.disabled = false; btn.textContent = "Send Reset Code";
            }
        } catch(e) { console.error(e); }
    });
</script>
</body>
</html>